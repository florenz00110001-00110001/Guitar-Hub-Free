<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guitar Hub Trainer</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#111; color:white; text-align:center; }
header { width:100%; background:#000; padding:10px 20px; display:flex; justify-content:space-between; align-items:center; position:fixed; top:0; left:0; z-index:1000; }
.logo { font-weight:bold; font-size:1.6em; color:white; }
button, input, select { padding:10px; margin:5px; border-radius:6px; border:none; font-size:1em; cursor:pointer; }
button { background: orange; color:white; }
button.back-btn { background:#444; }
.hidden { display:none; }
.chord-grid { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; padding:10px; }
.chord-card { background:#222; padding:10px; border-radius:8px; width:100px; color:white; }
.chord-card img { width:80px; height:auto; }
#song-search { width:90%; max-width:300px; margin-bottom:10px; }
iframe { width:100%; height:400px; border:0; margin-top:10px; }
.learn-lyrics { text-align:left; max-width:600px; margin:0 auto; white-space: pre-wrap; font-family: monospace; }
@media (max-width:600px){
  .chord-card{width:70px;}
  .chord-card img{width:60px;}
  input,select,button{width:90%; max-width:300px;}
}
</style>
</head>
<body>
<header>
  <div class="logo">Guitar Hub</div>
  <button id="burger-btn">&#9776;</button>
</header>

<main style="padding-top:80px;">
<!-- Intro Screen -->
<div id="intro-screen">
<h1>Welcome to Guitar Hub Trainer</h1>
<input type="text" id="username" placeholder="Username"><br>
<div style="position:relative; display:inline-block;">
<input type="password" id="password" placeholder="Password">
<button id="toggle-pass" style="position:absolute; right:0; top:0; padding:5px;">üëÅÔ∏è</button>
</div><br>
<button id="login-btn">Log In</button>
<button id="create-acc-btn">Create Account</button>
<button id="continue-btn">Continue Without Account</button>
</div>

<!-- Main Menu -->
<div id="main-menu" class="hidden">
<h2>Main Menu</h2>
<button id="view-chords-btn">View Chords</button>
<button id="practice-btn">Practice Chords</button>
<button id="strum-btn">Practice Strum</button>
<button id="chord-quiz-btn">Chord Recognition</button>
<button id="learn-song-btn">Learn Song</button>
</div>

<!-- Chords Section -->
<div id="chords" class="hidden">
<h2>Chords</h2>
<div class="chord-grid" id="chord-grid"></div>
<button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
</div>

<!-- Practice Section -->
<div id="practice" class="hidden">
<h2>Practice Chords</h2>
<div id="practice-display" style="font-size:2em;"></div>
<button id="next-practice">Next</button>
<p id="practice-feedback"></p>
<button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
</div>
<!-- Strum Section -->
<div id="strum" class="hidden">
<h2>Strum Practice</h2>
<input type="text" id="song-search" placeholder="Search Philippine songs..." oninput="filterSongs()"><br>
<select id="song-select" onchange="updateSongPattern()"></select><br>
<p id="song-pattern"></p>
<button id="random-song">Random Song</button><br>
<p id="strum-feedback"></p>
<button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
</div>

<!-- Chord Quiz -->
<div id="chord-quiz" class="hidden">
<h2>Chord Recognition</h2>
<div id="quiz-display"></div>
<div id="quiz-choices" class="chord-grid"></div>
<div id="quiz-score"></div>
<button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
</div>

<!-- Learn Song -->
<div id="learn-song" class="hidden">
<h2>Learn Song</h2>
<p id="learn-song-name"></p>
<div id="learn-pattern"></div>
<div class="learn-lyrics" id="learn-chords-lyrics"></div>
<iframe id="song-iframe" src=""></iframe>
<button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
</div>

<script>
// --- Global Variables ---
let currentUser = null;
let users = JSON.parse(localStorage.getItem("guitarUsers")) || {};
const chords = ["C","D","E","F","G","A","B","Am","Dm","Em"];
const philSongs = [
  {name:"Anak", pattern:"D D U U D U", url:"https://www.songsterr.com/a/wa/song/44251", lyrics:`[C]Nang [G]bata pa [Am]ako\n[C]Laging [G]pinap[Am]agal`},
  {name:"Buwan", pattern:"D U D U D U", url:"https://www.songsterr.com/a/wa/song/123456", lyrics:`[Am]Buwan, [F]buwan [G]ikaw`},
  {name:"Tadhana", pattern:"D D D D", url:"https://www.songsterr.com/a/wa/song/654321", lyrics:`[C]Tadhana [G]ating [Am]pag-ibig`},
  {name:"Hawak Kamay", pattern:"U D U D U D", url:"https://www.songsterr.com/a/wa/song/987654", lyrics:`[C]Hawak [G]kamay [Am]sa'yo`},
  {name:"Ikaw", pattern:"D U U D U D", url:"https://www.songsterr.com/a/wa/song/112233", lyrics:`[C]Ikaw [G]lamang [Am]sa aking puso`},
  {name:"Tagpuan", pattern:"D D U D U", url:"https://www.songsterr.com/a/wa/song/445566", lyrics:`[C]Sa [G]tagpuan [Am]tayo nagkita`}
];

// --- Helper Functions ---
function goBack(){
  document.getElementById("chords").classList.add("hidden");
  document.getElementById("practice").classList.add("hidden");
  document.getElementById("strum").classList.add("hidden");
  document.getElementById("chord-quiz").classList.add("hidden");
  document.getElementById("learn-song").classList.add("hidden");
  document.getElementById("main-menu").classList.remove("hidden");
}

// Show/Hide Password
document.getElementById("toggle-pass").onclick = () => {
  let p = document.getElementById("password");
  p.type = p.type === "password" ? "text" : "password";
};

// --- Intro / Login ---
document.getElementById("login-btn").onclick = () => {
  let u = document.getElementById("username").value.trim();
  let p = document.getElementById("password").value.trim();
  if(!u || !p){ alert("Enter username & password"); return; }
  if(users[u] && users[u].password === p){ currentUser = u; alert("Logged in"); showMenu(); }
  else alert("Invalid");
};
document.getElementById("create-acc-btn").onclick = () => {
  let u = document.getElementById("username").value.trim();
  let p = document.getElementById("password").value.trim();
  if(!u || !p){ alert("Enter username & password"); return; }
  if(users[u]){ alert("Exists"); return; }
  users[u] = {password:p, lastScore:0}; localStorage.setItem("guitarUsers", JSON.stringify(users));
  currentUser = u; alert("Created"); showMenu();
};
document.getElementById("continue-btn").onclick = () => { currentUser="Guest"; showMenu(); };
function showMenu(){
  document.getElementById("intro-screen").classList.add("hidden");
  document.getElementById("main-menu").classList.remove("hidden");
}

// --- Burger Menu ---
document.getElementById("burger-btn").onclick = () => {
  document.getElementById("main-menu").classList.toggle("hidden");
};

// --- Chords View ---
document.getElementById("view-chords-btn").onclick = () => {
  document.getElementById("main-menu").classList.add("hidden");
  document.getElementById("chords").classList.remove("hidden");
  let g = document.getElementById("chord-grid");
  g.innerHTML = "";
  chords.forEach(c => {
    let d = document.createElement("div");
    d.className = "chord-card";
    d.innerHTML = `<img src="image/${c.toLowerCase()}.png" alt="${c}" onerror="this.src='image/placeholder.png'"><br>${c}`;
    g.appendChild(d);
  });
};

// --- Practice Chords ---
let practiceIndex=0;
document.getElementById("practice-btn").onclick = () => {
  document.getElementById("main-menu").classList.add("hidden");
  document.getElementById("practice").classList.remove("hidden");
  nextPractice();
};
function nextPractice(){
  practiceIndex = Math.floor(Math.random()*chords.length);
  document.getElementById("practice-display").innerHTML =
    `<img src="image/${chords[practiceIndex].toLowerCase()}.png" alt="${chords[practiceIndex]}" style="width:100px;height:auto;"><br>${chords[practiceIndex]}`;
  document.getElementById("practice-feedback").textContent="";
}
document.getElementById("next-practice").onclick = nextPractice;

// --- Strum Practice ---
document.getElementById("strum-btn").onclick = () => {
  document.getElementById("main-menu").classList.add("hidden");
  document.getElementById("strum").classList.remove("hidden");
  populateSongSelect();
};
function populateSongSelect(){
  const s=document.getElementById("song-select"); s.innerHTML="";
  philSongs.forEach((song,i)=>{
    let o=document.createElement("option");
    o.value=i; o.textContent=song.name; o.setAttribute("data-pattern",song.pattern);
    s.appendChild(o);
  });
  updateSongPattern();
}
function updateSongPattern(){
  let s=document.getElementById("song-select");
  let p = philSongs[s.value];
  document.getElementById("song-pattern").textContent = "Pattern: "+p.pattern;
}
document.getElementById("random-song").onclick = () => {
  let i = Math.floor(Math.random()*philSongs.length);
  document.getElementById("song-select").value=i;
  updateSongPattern();
};
function filterSongs(){
  let term = document.getElementById("song-search").value.toLowerCase();
  let s = document.getElementById("song-select"); s.innerHTML="";
  philSongs.filter(song=>song.name.toLowerCase().includes(term)).forEach(song=>{
    let o = document.createElement("option");
    o.value = philSongs.indexOf(song);
    o.textContent = song.name;
    o.setAttribute("data-pattern", song.pattern);
    s.appendChild(o);
  });
  updateSongPattern();
}

// --- Learn Song ---
document.getElementById("learn-song-btn").onclick = () => {
  document.getElementById("main-menu").classList.add("hidden");
  document.getElementById("learn-song").classList.remove("hidden");
  let song = philSongs[document.getElementById("song-select").value];
  document.getElementById("learn-song-name").textContent = "Song: "+song.name;
  document.getElementById("learn-pattern").textContent = "Strum Pattern: "+song.pattern;
  document.getElementById("learn-chords-lyrics").textContent = song.lyrics;
  document.getElementById("song-iframe").src = song.url;
}

// --- Chord Quiz ---
document.getElementById("chord-quiz-btn").onclick = startQuiz;
let quizScore=0, quizQ=0, totalQ=5;
function startQuiz(){
  document.getElementById("main-menu").classList.add("hidden");
  document.getElementById("chord-quiz").classList.remove("hidden");
  quizScore=0; quizQ=0; nextQuiz();
}
function nextQuiz(){
  if(quizQ>=totalQ){
    document.getElementById("quiz-display").textContent="Done! Score: "+quizScore+"/"+totalQ;
    document.getElementById("quiz-choices").innerHTML="";
    if(currentUser && currentUser!=="Guest"){
      users[currentUser].lastScore=quizScore;
      localStorage.setItem("guitarUsers", JSON.stringify(users));
    }
    return;
  }
  let correct = chords[Math.floor(Math.random()*chords.length)];
  document.getElementById("quiz-display").textContent = correct;
  let choices = new Set([correct]);
  while(choices.size<4) choices.add(chords[Math.floor(Math.random()*chords.length)]);
  let shuffled = [...choices].sort(()=>Math.random()-0.5);
  let container = document.getElementById("quiz-choices"); container.innerHTML="";
  shuffled.forEach(c=>{
    let b=document.createElement("button");
    b.textContent=c;
    b.onclick=()=>{
      if(c===correct) quizScore++;
      quizQ++; nextQuiz();
    };
    container.appendChild(b);
  });
}
</script>
</body>
</html>
