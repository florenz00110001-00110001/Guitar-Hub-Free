<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guitar Hub Trainer</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#111; color:white; text-align:center; transition:0.3s; }
header { width:100%; background:#000; padding:10px 20px; display:flex; justify-content:space-between; align-items:center; position:fixed; top:0; left:0; z-index:1000; }
.logo { display:flex; align-items:center; font-weight:bold; font-size:1.6em; }
.logo span.guitar { color:white; }
.logo span.hub { color:black; background:yellow; padding:4px 8px; border-radius:5px; margin-left:5px; }
main { padding-top:80px; }
button { padding:12px 20px; margin:8px; background:orange; border:none; border-radius:8px; font-size:1em; cursor:pointer; }
button.back-btn { background:#444; color:white; }
.hidden { display:none; }
.chord-grid { display:flex; flex-wrap:wrap; justify-content:center; gap:15px; padding:20px; }
.chord-card { background:#222; padding:10px; border-radius:10px; box-shadow:0 0 10px #000; width:120px; }
.chord-card img { width:100px; height:auto; }
.dark-mode { background:#111; color:white; }
.light-mode { background:white; color:black; }
select { padding:10px; border-radius:8px; font-size:1em; margin:10px; }
</style>
</head>
<body>

<header>
  <div class="logo"><span class="guitar">Guitar</span><span class="hub">Hub</span></div>
  <button id="dark-toggle">Toggle Dark Mode</button>
</header>

<main>
  <!-- Intro -->
  <div id="intro-screen">
    <h1>Welcome to Guitar Trainer</h1>
    <button id="enter-btn">Enter</button>
  </div>

  <!-- Main Menu -->
  <div id="main-menu" class="hidden">
    <h2>Main Menu</h2>
    <button onclick="showChords()">View Chords</button>
    <button onclick="showPractice()">Practice Chords</button>
    <button onclick="showStrum()">Practice Strum</button>
    <button onclick="window.open('https://www.guitartuna.com/', '_blank')">Tune in using GuitarTuna!</button>
  </div>

  <!-- Chords -->
  <div id="chords" class="hidden">
    <h2>Basic Chords</h2>
    <div class="chord-grid" id="chord-grid"></div>
    <button class="back-btn" onclick="goBack()">⬅ Back</button>
  </div>

  <!-- Practice Chords -->
  <div id="practice" class="hidden">
    <h2>Practice Chords (Random)</h2>
    <div id="practice-chord-display" style="font-size:2em; margin:20px;"></div>
    <button id="next-chord">Next Chord</button>
    <p id="practice-feedback"></p>
    <button class="back-btn" onclick="goBack()">⬅ Back</button>
  </div>

  <!-- Strum -->
  <div id="strum" class="hidden">
    <h2>Practice Strum</h2>
    <div>
      <label for="song-select">Choose Song:</label>
      <select id="song-select"></select>
      <p id="song-pattern">Pattern: </p>
      <button id="random-song">Random Song</button>
      <button id="start-mic">Start Mic Test</button>
      <p id="strum-feedback"></p>
    </div>
    <button class="back-btn" onclick="goBack()">⬅ Back</button>
  </div>
</main>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const introScreen = document.getElementById("intro-screen");
  const mainMenu = document.getElementById("main-menu");
  const chords = document.getElementById("chords");
  const practice = document.getElementById("practice");
  const strum = document.getElementById("strum");
  const enterBtn = document.getElementById("enter-btn");
  const darkToggle = document.getElementById("dark-toggle");

  darkToggle.addEventListener("click", () => {
    document.body.classList.toggle("dark-mode");
    document.body.classList.toggle("light-mode");
  });

  enterBtn.addEventListener("click", () => {
    introScreen.classList.add("hidden");
    mainMenu.classList.remove("hidden");
  });

  function showChords(){ mainMenu.classList.add("hidden"); chords.classList.remove("hidden"); }
  function showPractice(){ mainMenu.classList.add("hidden"); practice.classList.remove("hidden"); nextPracticeChord(); }
  function showStrum(){ 
    mainMenu.classList.add("hidden"); 
    strum.classList.remove("hidden"); 
    populateSongSelect();
    loadRandomSong();
  }
  function goBack(){ chords.classList.add("hidden"); practice.classList.add("hidden"); strum.classList.add("hidden"); mainMenu.classList.remove("hidden"); }

  window.showChords = showChords;
  window.showPractice = showPractice;
  window.showStrum = showStrum;
  window.goBack = goBack;

  // Local images for initial chords
  const localChords = ['c','a','d','g','e','em'];
  const chordGrid = document.getElementById("chord-grid");
  localChords.forEach(chord => {
    const card = document.createElement("div");
    card.classList.add("chord-card");
    card.innerHTML = `<img src="image/${chord}.png" alt="${chord.toUpperCase()} chord" onerror="this.src='image/placeholder.png'"><p>${chord.toUpperCase()}</p>`;
    chordGrid.appendChild(card);
  });

  // External images (fixed direct links)
  const remainingChords = [
    {name:'Am', url:'https://i.ibb.co/zQmQ2Rn/am.png'},
    {name:'Cmaj7', url:'https://i.ibb.co/znBr3nW/cmaj7.png'},
    {name:'Dm', url:'https://i.ibb.co/ZXqF4LN/dm.png'},
    {name:'F', url:'https://i.ibb.co/pf6S4Gm/f.png'},
    {name:'F#', url:'https://i.ibb.co/0YfRZc5/fsharp.png'},
    {name:'F#m', url:'https://i.ibb.co/mJX3qHR/fsharpm.png'},
    {name:'B', url:'https://i.ibb.co/fxqcsdf/b.png'},
    {name:'Bb', url:'https://i.ibb.co/0sPbZ7L/bb.png'},
    {name:'Bm', url:'https://i.ibb.co/zWpkTnt/bm.png'},
    {name:'C#m', url:'https://i.ibb.co/7y4Q4FG/csharpm.png'},
    {name:'G#m', url:'https://i.ibb.co/gm4W8qh/gsharpm.png'}
  ];
  remainingChords.forEach(chord => {
    const card = document.createElement("div");
    card.classList.add("chord-card");
    card.innerHTML = `<img src="${chord.url}" alt="${chord.name} chord" onerror="this.src='image/placeholder.png'"><p>${chord.name}</p>`;
    chordGrid.appendChild(card);
  });

  // Practice Chords Randomizer
  const practiceChords = localChords.concat(remainingChords.map(c=>c.name));
  const practiceDisplay = document.getElementById("practice-chord-display");
  const feedback = document.getElementById("practice-feedback");
  let currentPractice = "";

  function nextPracticeChord(){
    currentPractice = practiceChords[Math.floor(Math.random()*practiceChords.length)];
    practiceDisplay.textContent = currentPractice;
    feedback.textContent = "";
  }
  document.getElementById("next-chord").addEventListener("click", nextPracticeChord);

  // Strum Patterns
  const songs = [
    {name:"Huling El Bimbo", pattern:"DD UUDD DU"},
    {name:"14", pattern:"DD UDUDD DU"},
    {name:"Kahit Maputi Na Ang Buhok Ko", pattern:"DUD DUD"},
    {name:"Perfect", pattern:"DD UU DU"},
  ];
  let currentSong;

  function loadRandomSong(){
    currentSong = songs[Math.floor(Math.random()*songs.length)];
    document.getElementById("song-pattern").textContent = `Song: ${currentSong.name} | Pattern: ${currentSong.pattern}`;
    document.getElementById("strum-feedback").textContent = "";
  }

  // Populate dropdown
  function populateSongSelect(){
    const select = document.getElementById("song-select");
    select.innerHTML = "";
    songs.forEach(song => {
      const option = document.createElement("option");
      option.value = song.name;
      option.textContent = song.name;
      select.appendChild(option);
    });
    select.addEventListener("change", function(){
      const selected = songs.find(s => s.name === this.value);
      if(selected){
        currentSong = selected;
        document.getElementById("song-pattern").textContent = `Song: ${selected.name} | Pattern: ${selected.pattern}`;
      }
    });
  }

  // Random song button
  document.getElementById("random-song").addEventListener("click", loadRandomSong);

  // Mic test placeholder
  document.getElementById("start-mic").addEventListener("click", ()=>{
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
        document.getElementById("strum-feedback").textContent = "Mic is active! Now try strumming.";
        stream.getTracks().forEach(track => track.stop());
      }).catch(err => {
        document.getElementById("strum-feedback").textContent = "Mic access denied.";
      });
    } else {
      document.getElementById("strum-feedback").textContent = "Mic not supported in this browser.";
    }
  });
});
</script>
</body>
</html>
