<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guitar Hub Trainer</title>
<style>
body{font-family:Arial,sans-serif;margin:0;padding:0;background:#111;color:white;text-align:center;transition:0.3s;}
header{width:100%;background:#000;padding:10px 20px;display:flex;justify-content:center;align-items:center;position:fixed;top:0;z-index:1000;}
.logo{font-weight:bold;font-size:1.6em;color:white;}
button,input,select{padding:10px;margin:5px;border-radius:6px;border:none;font-size:1em;cursor:pointer;}
button{background:orange;color:black;}
.back-btn{background:#444;color:white;}
.hidden{display:none;}
.chord-grid{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;padding:10px;overflow-x:auto;}
.chord-card{background:#222;padding:10px;border-radius:8px;width:100px;color:white;flex-shrink:0;}
.chord-card img{width:80px;height:auto;}
.learn-lyrics{text-align:left;white-space:pre-wrap;overflow-y:auto;max-height:300px;margin:5px;}
#hud{position:fixed;top:60px;right:10px;background:#222;color:white;padding:10px;border-radius:8px;z-index:9999;display:none;}
#dark-toggle{position:fixed;top:10px;right:10px;background:#444;color:white;padding:5px 10px;border-radius:6px;cursor:pointer;}
@media(max-width:600px){
  body{font-size:14px;}
  .chord-card{width:60px;font-size:0.8em;}
  button,input,select{width:90%;font-size:1em;padding:10px;margin:5px 0;}
  .chord-grid{gap:5px;justify-content:flex-start;}
  .learn-lyrics{max-height:200px;font-size:0.9em;}
}
</style>
</head>
<body>

<header>
<div class="logo">Guitar Hub</div>
<button id="dark-toggle">Dark Mode</button>
</header>

<div id="hud">
<p>Quiz Score: <span id="hud-score">0</span></p>
<p>Accuracy: <span id="hud-accuracy">0%</span></p>
</div>

<main style="padding-top:80px;">

<!-- Login Screen -->
<div id="intro-screen">
<h1>Welcome to Guitar Hub</h1>
<input type="text" id="username" placeholder="Username"><br>
<div style="position:relative; display:inline-block;">
<input type="password" id="password" placeholder="Password">
<button id="toggle-pass" style="position:absolute; right:0; top:0; padding:5px;">üëÅÔ∏è</button>
</div><br>
<button id="login-btn">Log In</button>
<button id="create-acc-btn">Create Account</button>
<button id="continue-btn">Continue Without Account</button>
<p><a href="#" id="forgot-pass" style="color:orange;">Forgot Password?</a></p>
</div>

<!-- Main Menu -->
<div id="main-menu" class="hidden">
<h2>Main Menu</h2>
<button id="view-chords-btn">View Chords</button>
<button id="practice-btn">Practice Chords</button>
<button id="strum-btn">Practice Strum</button>
<button id="chord-quiz-btn">Chord Recognition</button>
<button id="learn-song-btn">Learn Song</button>
</div>

<!-- Chords Section -->
<div id="chords" class="hidden">
<h2>Basic Chords</h2>
<div class="chord-grid" id="chord-grid"></div>
<button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
</div>

<!-- Practice Chords -->
<div id="practice" class="hidden">
<h2>Practice Chords</h2>
<div id="practice-display" style="font-size:2em; margin:20px;"></div>
<button id="next-practice">Next</button>
<p id="practice-feedback"></p>
<button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
</div>

<!-- Strum Practice -->
<div id="strum" class="hidden">
<h2>Strum Practice</h2>
<input type="text" id="song-search" placeholder="Search Filipino songs..." oninput="filterSongs()"><br>
<select id="song-select" onchange="updateSongPattern()"></select><br>
<p id="song-pattern"></p>
<button id="random-song">Random Song</button><br>
<button id="play-strum">üé∏ Play Strum Sound</button>
<p id="strum-feedback"></p>
<button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
</div>

<script>
// --- Global ---
let currentUser=null;
let users=JSON.parse(localStorage.getItem("guitarUsers"))||{};
const chords=["C","D","E","F","G","A","B","Am","Dm","Em"];
const philSongs=[
{name:"Anak",pattern:"D D U U D U",lyrics:"[C]Anak, [G]naiyak ka na naman...",url:"https://www.songsterr.com/a/wa/song/44251"},
{name:"Buwan",pattern:"D U D U D U",lyrics:"[Em]Buwan, [Am]buwan...",url:"https://www.songsterr.com/a/wa/song/123456"},
{name:"Tadhana",pattern:"D D D D",lyrics:"[G]Tadhana, [C]sa bawat hakbang...",url:"https://www.songsterr.com/a/wa/song/654321"},
{name:"Hawak Kamay",pattern:"U D U D U D",lyrics:"[C]Hawak kamay, [F]kaibigan...",url:"https://www.songsterr.com/a/wa/song/987654"},
{name:"Ikaw",pattern:"D U U D U D",lyrics:"[G]Ikaw, [D]sa aking buhay...",url:"https://www.songsterr.com/a/wa/song/112233"},
{name:"Tagpuan",pattern:"D D U D U",lyrics:"[Am]Tagpuan, [Em]sa ilalim ng buwan...",url:"https://www.songsterr.com/a/wa/song/445566"}
];

// --- Helpers ---
function goBack(){
  document.getElementById("chords").classList.add("hidden");
  document.getElementById("practice").classList.add("hidden");
  document.getElementById("strum").classList.add("hidden");
  document.getElementById("chord-quiz").classList.add("hidden");
  document.getElementById("learn-song").classList.add("hidden");
  document.getElementById("main-menu").classList.remove("hidden");
}

// --- Show Password ---
document.getElementById("toggle-pass").onclick=()=>{
  let p=document.getElementById("password");
  p.type=p.type==="password"?"text":"password";
}

// --- Dark Mode ---
document.getElementById("dark-toggle").onclick=()=>{
  document.body.classList.toggle("dark-mode");
}
</script>
<script>
// --- Intro / Login ---
document.getElementById("login-btn").onclick=()=>{
  let u=document.getElementById("username").value.trim();
  let p=document.getElementById("password").value.trim();
  if(!u||!p){alert("Enter username & password"); return;}
  if(users[u]&&users[u].password===p){
    currentUser=u;
    alert("Logged in as "+u);
    showMenu();
  } else alert("Invalid username/password");
};
document.getElementById("create-acc-btn").onclick=()=>{
  let u=document.getElementById("username").value.trim();
  let p=document.getElementById("password").value.trim();
  if(!u||!p){alert("Enter username & password"); return;}
  if(users[u]){alert("Username exists"); return;}
  users[u]={password:p,lastScore:0};
  localStorage.setItem("guitarUsers",JSON.stringify(users));
  currentUser=u;
  alert("Account created: "+u);
  showMenu();
};
document.getElementById("continue-btn").onclick=()=>{
  currentUser="Guest";
  showMenu();
};
document.getElementById("forgot-pass").onclick=()=>{
  let u=prompt("Enter your username for password reset:");
  if(u&&users[u]) alert("Your password is: "+users[u].password);
  else alert("User not found");
};

function showMenu(){
  document.getElementById("intro-screen").classList.add("hidden");
  document.getElementById("main-menu").classList.remove("hidden");
}

// --- View Chords ---
document.getElementById("view-chords-btn").onclick=()=>{
  document.getElementById("main-menu").classList.add("hidden");
  document.getElementById("chords").classList.remove("hidden");
  let g=document.getElementById("chord-grid");
  g.innerHTML="";
  chords.forEach(c=>{
    let d=document.createElement("div");
    d.className="chord-card";
    d.innerHTML=`<img src="image/${c.toLowerCase()}.png" alt="${c}"><br>${c}`;
    g.appendChild(d);
  });
};

// --- Practice Chords ---
document.getElementById("practice-btn").onclick=()=>{
  document.getElementById("main-menu").classList.add("hidden");
  document.getElementById("practice").classList.remove("hidden");
  nextPractice();
};
let practiceIndex=0;
function nextPractice(){
  practiceIndex=Math.floor(Math.random()*chords.length);
  document.getElementById("practice-display").textContent=chords[practiceIndex];
  document.getElementById("practice-feedback").textContent="";
}
document.getElementById("next-practice").onclick=nextPractice;

// --- Strum Practice ---
document.getElementById("strum-btn").onclick=()=>{
  document.getElementById("main-menu").classList.add("hidden");
  document.getElementById("strum").classList.remove("hidden");
  populateSongSelect();
};
function populateSongSelect(){
  const s=document.getElementById("song-select");
  s.innerHTML="";
  philSongs.forEach((song,i)=>{
    let o=document.createElement("option");
    o.value=i;
    o.textContent=song.name;
    o.setAttribute("data-pattern",song.pattern);
    s.appendChild(o);
  });
  updateSongPattern();
}
function updateSongPattern(){
  let s=document.getElementById("song-select");
  let p=philSongs[s.value];
  document.getElementById("song-pattern").textContent="Pattern: "+p.pattern;
}
document.getElementById("random-song").onclick=()=>{
  let i=Math.floor(Math.random()*philSongs.length);
  document.getElementById("song-select").value=i;
  updateSongPattern();
}
function filterSongs(){
  let term=document.getElementById("song-search").value.toLowerCase();
  let s=document.getElementById("song-select");
  s.innerHTML="";
  philSongs.filter(song=>song.name.toLowerCase().includes(term))
          .forEach((song,i)=>{
    let o=document.createElement("option");
    o.value=i;
    o.textContent=song.name;
    o.setAttribute("data-pattern",song.pattern);
    s.appendChild(o);
  });
  updateSongPattern();
}

// Guitar sound test
document.getElementById("play-strum").onclick=()=>{
  alert("üé∏ Guitar strum sound test: (placeholder, integrate audio playback here)");
};

// --- Learn Song ---
document.getElementById("learn-song-btn").onclick=()=>{
  document.getElementById("main-menu").classList.add("hidden");
  let l=document.createElement("div");
  l.id="learn-song";
  l.className="";
  document.body.appendChild(l); // attach temporarily if not exists
  document.getElementById("learn-song").classList.remove("hidden");
  let song=philSongs[document.getElementById("song-select").value];
  document.getElementById("learn-song").innerHTML=`
    <h2>${song.name}</h2>
    <div class="learn-lyrics">${song.lyrics}</div>
    <p>Chords: ${chords.join(", ")}</p>
    <p>Strum Pattern: ${song.pattern}</p>
    <iframe src="${song.url}"></iframe>
    <button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
  `;
}

// --- Chord Recognition ---
document.getElementById("chord-quiz-btn").onclick=startQuiz;
let quizScore=0,quizQ=0,quizTimer,totalQ=5;

function startQuiz(){
  document.getElementById("main-menu").classList.add("hidden");
  if(!document.getElementById("chord-quiz")){
    let qdiv=document.createElement("div");
    qdiv.id="chord-quiz";
    qdiv.innerHTML=`
      <h2>Chord Recognition</h2>
      <div id="quiz-display"><img id="quiz-img" style="width:100px;height:auto;"></div>
      <div id="quiz-choices" class="chord-grid"></div>
      <div id="quiz-timer">Time: <span id="time-left">5</span>s</div>
      <div id="quiz-score">Score: 0</div>
      <button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
    `;
    document.body.appendChild(qdiv);
  }
  document.getElementById("chord-quiz").classList.remove("hidden");
  quizScore=0; quizQ=0;
  nextQuiz();
}

function nextQuiz(){
  if(quizQ>=totalQ){
    document.getElementById("quiz-display").textContent="Done! Score: "+quizScore+"/"+totalQ;
    document.getElementById("quiz-choices").innerHTML="";
    updateHUD();
    return;
  }
  let correct=chords[Math.floor(Math.random()*chords.length)];
  document.getElementById("quiz-img").src="image/"+correct.toLowerCase()+".png";
  let choices=new Set([correct]);
  while(choices.size<4) choices.add(chords[Math.floor(Math.random()*chords.length)]);
  let shuffled=[...choices].sort(()=>Math.random()-0.5);
  let container=document.getElementById("quiz-choices");
  container.innerHTML="";
  shuffled.forEach(c=>{
    let b=document.createElement("button");
    b.textContent=c;
    b.onclick=()=>{
      if(c===correct) quizScore++;
      quizQ++;
      clearInterval(quizTimer);
      nextQuiz();
      if(currentUser && currentUser!=="Guest"){
        users[currentUser].lastScore=quizScore;
        localStorage.setItem("guitarUsers", JSON.stringify(users));
      }
      updateHUD();
    };
    container.appendChild(b);
  });
  let t=5;
  document.getElementById("time-left").textContent=t;
  quizTimer=setInterval(()=>{
    t--;
    document.getElementById("time-left").textContent=t;
    if(t<=0){
      clearInterval(quizTimer);
      quizQ++;
      nextQuiz();
    }
  },1000);
}

// --- HUD update ---
function updateHUD(){
  document.getElementById("hud").style.display="block";
  if(currentUser && users[currentUser]){
    document.getElementById("hud-score").textContent=users[currentUser].lastScore || 0;
    document.getElementById("hud-accuracy").textContent=Math.round((quizScore/totalQ)*100)+"%";
  }
}
</script>
